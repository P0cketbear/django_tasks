{% extends "main.html" %}

{% block content %}

<style>
   .home-container {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
   }
</style>

<div class='home-container'>

   <div>

      <h3>Browse Topics</h3>
<a href="{% url 'home' %}">All</a><br>
      {% for topic in topics %}
      <div>
      <a href="{% url 'home' %}?q={{topic.name}}">{{topic.name}}</a><br>
      </div>
      {% endfor %}

      <hr>

   </div>



   <div>
      <h5>{{room_count}} rooms created</h5>

      <a href="{% url 'create-room' %}">Create Room</a>


      {% for room in rooms %}

      <div>
         <span>@{{room.host.username}}</span><br>

         {{room.id}} -- <a href="/room/{{room.id}}">{{room.name}}</a> <br>

         {% if user == room.host %}
         <a href="{% url 'update-room' room.id %}">Edit</a>
         <a href="{% url 'delete-room' room.id %}">Delete</a>
         {% endif %}
         
         
         <small>{{room.topic.name}}</small>

         <hr>
      </div>
      {% endfor %}
   </div>

<div>
   <h3>Recent Activity</h3>
   <hr>
   {% for message in room_messages %}
   <div>
      <small>@{{message.user.username}} {{message.created|timesince}} ago</small> <br>
      <small>replied to: {{message.room.name}}</small>
      <p>{{message.body}}</p>
      {% if message.user == user %}
      
      <a href="{% url 'delete-message' message.id %}">Delete</a>
      {% endif %}
      <hr>
   </div>
   {% endfor %}

</div>

</div>

{% endblock %}